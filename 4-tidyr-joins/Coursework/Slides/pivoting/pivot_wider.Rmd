---
title: "Pivoting Wider"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: ["../xaringan-themer.css", "../slide-style.css"]
    nature:
      highlightStyle: solarized-light
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
      slideNumberFormat: |
        <div class="progress-bar-container">
          <div class="progress-bar" style="width: calc(%current% / %total% * 100%);">
          </div>
        </div>
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

```{r xaringan-themer, include=FALSE}
library(xaringanthemer)
library(xaringan)
library(tidyverse)
library(flair)

style_duo_accent(
  primary_color      = "#0F4C81", # pantone classic blue
  secondary_color    = "#B6CADA", # pantone baby blue
  header_font_google = google_font("Raleway"),
  text_font_google   = google_font("Raleway", "300", "300i"),
  code_font_google   = google_font("Source Code Pro"),
  text_font_size     = "30px"
)
```

```{r, echo = FALSE, message = FALSE}
cereals <- read_csv("../practice/cereals.csv") %>% 
  mutate(type = as_factor(type), 
         mfr = as_factor(mfr))
```

# Pivoting wider

Need row IDs to pivot wide!

```{r}
penguins %>%
  rowid_to_column() 
```

---
class: center, middle, inverse

# Tip 3:
## Separate your task into bite-size steps
### ... and write them down!
### (This is called *decomposition*.)

---
# Pivoting wider

```{r}
penguins %>%
  rowid_to_column() %>%
  pivot_wider(names_from = species, 
              values_from = body_mass_g,
              id_cols = rowid)

```
---
# Try it!

Cereals in this dataset are placed on shelf 1, 2, or 3.  We would like to know if these cereal placements correspond to different nutritional values.

Create a new dataset called `cereals_4`, that has four columns:
* The name of the manufacturer
* The mean amount of sugar in cereals on shelf 1.
* The mean amount of sugar in cereals on shelf 2.
* The mean amount of sugar in cereals on shelf 3.

*Hint: You will need to `group_by` and `summarize` first!`

---

# Pivoting wider

What about the reverse reshaping?

```{r, error = TRUE}
penguins %>%
  select(species, body_mass_g) %>%
  pivot_wider(names_from = species, 
              values_from = body_mass_g)

```

---
