---
title: "Factors, Strings, & Dates"
output:
  prettydoc::html_pretty:
    theme: tactile
    highlight: github
    css: styles.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include = FALSE}
library(tidyverse)
library(lubridate)
```

`r emo::ji("play button")` Watch Videos: 40 minutes  
  
  * `r emo::ji("link")` Link to **all** Slides from Videos: [here](https://app.box.com/s/vxf4ynij6qnymx34s5l49xejecdbq6zk)

`r emo::ji("book")` Readings: 45-60 minutes   

`r emo::ji("computer")` Activities: 60-75 minutes  
  
`r emo::ji("check")` Check-ins: 3


---

# Factors

`r emo::ji("book")` [Required Reading: *R4DS* -- Factors with forcats](https://r4ds.had.co.nz/factors.html)

`r emo::ji("play button")` [Required Video: Factors with forcats](http://somup.com/crfTrOF3tN)

---

`r emo::ji("check")` **Check-in: Functions from forcats** 

Answer the questions based on the reading, video, **forcats**
[website](https://forcats.tidyverse.org/reference/index.html), or 
**forcats** [cheat sheet](https://www.rstudio.com/resources/cheatsheets/). 

* What is the difference between `fct_relevel()` and `fct_recode()`?

<!-- fct_relevel() -- moves the levels of a factor to different positions -->
<!-- fct_recode() -- changes values of levels of a factor -->

* What is the difference between `fct_collapse()` and `fct_lump()`?

<!-- fct_collapse() -- collapses levels of a factor into a new level -->
<!-- fct_lump() -- lumps all of the least represented levels together -->

* What is the difference between `fct_reorder()` and `fct_inorder()`?

<!-- fct_reorder() -- orders the levels of a factor based on the values of a  -->
<!-- variable / variables (done in ascending order) -->
<!-- fct_inorder() -- changes the levels of a factor to be in the order they appeared -->

*Feel free to share answers with your classmates in the Discord server, to make
sure you understand.*

`r emo::ji("check")` **Check-in: Apply your skills**

In your *colleges_clean* dataset, adjust the `REGION` variable to have nicer or
clearer labels and/or better categories.

---

# Strings

`r emo::ji("book")` [Required Reading: *R4DS* -- Strings](https://r4ds.had.co.nz/strings.html)

`r emo::ji("play button")` [Required Video -- Strings with stringr](https://www.youtube.com/watch?v=Oo_MtXwpi2Q)  

---

`r emo::ji("check")` **Check-in: Functions from stringr**

Answer the questions based on the reading, video, **stringr**
[website](https://stringr.tidyverse.org/reference/index.html), or 
**stringr** [cheat sheet](https://www.rstudio.com/resources/cheatsheets/). 

* What is the difference between `length()` and `str_length()`?

<!-- length() gives the number of elements in a vector  -->
<!-- str_length() gives the number of characters in a string -->

* What is the difference between `str_replace()` and `str_replace_all()`?

<!-- str_replace() replaces the FIRST instance of the pattern  -->
<!-- str_replace_all() replaces EVERY instance of the pattern -->

* What is the difference between `str_trim()` and `str_trunc()`?

<!-- str_trim() removes the whitespace from the start / end of a string -->
<!-- str_trunc() truncates a string based on the desired "width" / length of the string -->

* What is the difference between `str_sub()` and `str_subset()`?

<!-- str_sub() creates a substring of a string, based on the start / end positions given  -->
<!-- str_subset() outputs the elements of a string that match the given pattern -->

* What does the `collapse` argument do in `str_c()`?

<!-- collapse provides a character that should be used when ALL of the elements  -->
<!-- of a vector of characters are combined -->

*Feel free to share answers with your classmates in the Discord server, to make
sure you understand.*

`r emo::ji("check")` **Check-in: Apply your skills**

Using your *colleges_clean* dataset, answer these questions:

**Question 1:** How *exactly* does Cal Poly's name appear in this dataset?

```{r, include = FALSE, eval = FALSE}
colleges_clean$INSTNM %>%
  str_subset("Polytechnic")
```

**Question 2:** How many colleges have the word "University" in their name?

```{r, include = FALSE, eval = FALSE}
colleges_clean %>%
  mutate(
    is_univ = str_detect(INSTNM, "University")
  ) %>%
  count(is_univ)

```

**Question 3:** Which college has the *longest* name?  The *shortest* name?

```{r, include = FALSE, eval = FALSE}
colleges_clean %>%
  mutate(
    name_len = str_length(INSTNM)
  ) %>% 
  slice_min(name_len) 

colleges_clean %>%
  mutate(
    name_len = str_length(INSTNM)
  ) %>% 
  slice_max(name_len) 

```

---

# Dates

`r emo::ji("play button")` [Required Video: DateTime Objects with lubridate](http://somup.com/crfTrLF3U3)

`r emo::ji("book")` [Required Reading: *R4DS* -- Dates and Times](https://r4ds.had.co.nz/dates-and-times.html)

**Extra Resources**

* [A more in-depth discussion of the POSIXlt and POSIXct data classes.](https://www.cyclismo.org/tutorial/R/time.html)

* [A tutorial on lubridate](https://data.library.virginia.edu/working-with-dates-and-time-in-r-using-the-lubridate-package/) - scroll down for details on intervals if 
you have trouble with `%within%` and `%--%`

---

`r emo::ji("check")` **Check-in: Functions from lubridate**

Answer the questions based on the reading, video, **lubridate**
[website](https://lubridate.tidyverse.org/reference/index.html), or 
**lubridate** [cheat sheet](https://www.rstudio.com/resources/cheatsheets/). 

- What is the difference between `year()` and `years()`?

<!-- year() -- extracts the year of a datetime object -->
<!-- years() -- creates a period object based on number of years  -->

- What `tz` would you use for San Luis Obispo? 

<!-- tz = "America/Los_Angeles" -->

- What is the difference between `%within%` and `%--%`?

<!-- %within% checks if a date is included in an interval -->
<!-- %--% creates an interval with a start and end time  -->
 
- What happens if you use the `make_date()` function,
but you do not provide a `day` argument?

<!-- Assigns the first day of that month! -->

*Feel free to share answers with your classmates in the Discord server, to make
sure you understand.*

`r emo::ji("check")` **Check-in: Apply your skills**

(Answer the following using code (even if you know the answer already).

First, use the `make_date()` function to save your birthday as a
Datetime object in R.  

```{r, include = FALSE}
bday <- make_date(day = 14, month = 1, year = 1989)
```

- What day of the week does/did your birthday fall on in 2023?

```{r, include = FALSE}
(bday  + years(34)) %>% 
  wday(label = TRUE)
```

- On what day of the week should you plan your 50th birthday party?

```{r, include = FALSE}
(bday  + years(50)) %>% 
  wday(label = TRUE)
```

- Find the date that is exactly 9 months before the day you were born.  If it
falls on a holiday, think about the implications.

```{r, include = FALSE}
bday - months(9)
```
