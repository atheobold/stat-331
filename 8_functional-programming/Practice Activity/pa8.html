<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.120">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lab 8: The 12 Days of Christmas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="pa8_files/libs/clipboard/clipboard.min.js"></script>
<script src="pa8_files/libs/quarto-html/quarto.js"></script>
<script src="pa8_files/libs/quarto-html/popper.min.js"></script>
<script src="pa8_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="pa8_files/libs/quarto-html/anchor.min.js"></script>
<link href="pa8_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="pa8_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="pa8_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="pa8_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="pa8_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 8: The 12 Days of Christmas</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<center>
<img src="christmas_tree.jpg" class="img-fluid">
</center>
<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>The song “12 Days of Christmas”, written around 1780, tells the tale of many gifts a person receives in the days leading up to Christmas. (<a href="https://en.wikipedia.org/wiki/The_Twelve_Days_of_Christmas_(song)%5D(https://en.wikipedia.org/wiki/The_Twelve_Days_of_Christmas_(song))">link to lyrics</a>).</p>
<p>These gifts repeat and compound; on the first day, the narrator receives</p>
<pre><code>A partridge in a pear tree.</code></pre>
<p>On the twelfth day, they receive</p>
<pre><code>Twelve Drummers Drumming
Eleven Pipers Piping
Ten Lords a Leaping
Nine Ladies Waiting
Eight Maids a Milking
Seven Swans a Swimming
Six Geese a Laying
Five Golden Rings
Four Calling Birds
Three French Hens
Two Turtle Doves
And a Partridge in a Pear Tree</code></pre>
<p>This week, your task will be to write functions that automatically sing this very repetitive song. Today, we will start by writing two helper functions which we will use on Thursday to write a function to sing this song.</p>
<hr>
</section>
<section id="the-dataset" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="the-dataset"><span class="header-section-number">2</span> The Dataset</h2>
<p>Run the code provided to load in a dataset called <code>xmas</code> that contains the crucial information about the gifts in the song. We will use this dataset to test out our functions as we work on them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>xmas <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://www.dropbox.com/s/e584pryn8evm1gz/xmas.csv?dl=1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that your functions can - and should! - reference each other. That is, don’t duplicate code; use earlier, smaller functions inside your larger functions.</p>
<section id="other-packages" class="level3">
<h3 class="anchored" data-anchor-id="other-packages">Other packages</h3>
<p>The packages <code>dplyr</code>, <code>stringr</code>, <code>glue</code>, and <code>purrr</code> are already loaded into the materials for making the <code>twelvedays</code> functions. Make sure you have each of these packages installed!</p>
<p>If you want to rely on functions from other packages that’s fine, but you will need to load them in the set-up chunk.</p>
</section>
</section>
<section id="advice" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="advice"><span class="header-section-number">3</span> Advice</h2>
<section id="workflow" class="level3">
<h3 class="anchored" data-anchor-id="workflow">Workflow</h3>
<p>Make smaller versions of the <code>xmas</code> dataset (e.g., the first two days).</p>
<p>Once you feel confident in your function code, use the smaller version of the data to test the functions you write, <em>before</em> you test them on the full dataset.</p>
</section>
<section id="build-from-small-pieces" class="level3">
<h3 class="anchored" data-anchor-id="build-from-small-pieces">Build from small pieces</h3>
<p>If you have some trouble getting started, I recommend writing a function that works in one case, and then trying to generalize.</p>
<p>For example, in building my <code>sing_day()</code> function, I might first write a version called <code>sing_third_day()</code> that sings</p>
<pre><code>On the third day of Christmas, my true love gave to me:
three french hens,
two turtle doves,
and a patridge in a pear tree.</code></pre>
</section>
<section id="dont-sweat-the-small-stuff" class="level3">
<h3 class="anchored" data-anchor-id="dont-sweat-the-small-stuff">Don’t sweat the small stuff</h3>
<p>There’s a lot you can do to polish up the way the song prints.</p>
<p>However, the goal of this lab is to practice writing functions and using iteration. Don’t get bogged down in details like how the song displays, or small grammar rules (like commas!), until you’ve finished the main tasks.</p>
<center>
<section id="lets-get-started" class="level4">
<h4 class="anchored" data-anchor-id="lets-get-started">Let’s Get Started!</h4>
</section></center>
<hr>
</section>
</section>

<section id="step-one-plurals" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="step-one-plurals"><span class="header-section-number">4</span> Step One: Plurals</h2>
<p>Note that the gifts are listed in singular: for example, on day five the narrator receives “five golden rings”, but the entry in the dataset for the gift on day five simply says “ring”.</p>
<p>Using the skeleton of the <code>pluralize_gift()</code> function, complete the code so that the function takes a gift and returns the appropriate plural.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Hint 1:</em> Note that the gifts on days six and nine have unusual pluralization. You may assume that in other datasets, there will be <strong>no</strong> additional special cases besides these types.</p>
<p><em>Hint 2:</em> The following small example may be useful to you:</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>my_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Kimberly"</span>, <span class="st">"Trini"</span>, <span class="st">"Jason"</span>, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>              <span class="st">"Billy"</span>, <span class="st">"Zach"</span>, <span class="st">"Tommy"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>my_names <span class="sc">|&gt;</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">"s"</span>, <span class="at">sep =</span> <span class="st">""</span>) <span class="sc">|&gt;</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">"ys$"</span>, <span class="st">"ies"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Kimberlies" "Trinis"     "Jasons"     "Billies"    "Zachs"     
[6] "Tommies"   </code></pre>
</div>
</div>
<div class="callout-caution callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Danger
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Important:</strong> You should <strong>absolutely not</strong> “hard-code” anything into this function; this function should work in general, not just for the items in the 12 Days of Christmas. For example, the word “rings” should not appear anywhere in the function. I should be able to give it any gift and get back the plural of that gift.</p>
</div>
</div>
<section id="test-your-function" class="level3">
<h3 class="anchored" data-anchor-id="test-your-function">Test Your Function</h3>
<p>Try your function out on the smaller and then larger gift dataset. Consider: is your function <em>vectorized</em>? It does not have to be, but you can try it out if you want!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Will work if your function is vectorized! </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pluralize_gift</span>(xmas<span class="sc">$</span>Gift.Item)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Will work if your function is not vectorized!</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">map_chr</span>(xmas<span class="sc">$</span>Gift.Item, pluralize_gift)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="step-two-creating-sentences" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="step-two-creating-sentences"><span class="header-section-number">5</span> Step Two: Creating sentences</h2>
<p>Write a function called <code>make_phrase()</code> that takes as input the necessary information, and returns a phrase. For example,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_phrase</span>(<span class="at">num_word =</span> <span class="st">"ten"</span>, </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">item =</span> <span class="st">"lords"</span>, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">verb =</span> <span class="st">"a-leaping"</span>, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">adjective =</span> <span class="st">""</span>, </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">location =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>should return</p>
<pre><code>"ten lords a-leaping"</code></pre>
<section id="test-your-function-1" class="level3">
<h3 class="anchored" data-anchor-id="test-your-function-1">Test Your Function</h3>
<p>Try your function out on the <code>xmas</code> data, by making a new variable containing the daily phrases. Notice I’ve provided you with the code to iterate through each row of the dataset to create a phrase—all you need to do is provide the necessary inputs into <code>pmap_chr()</code>.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Hint:</strong> The <code>Day.in.Words</code> variable isn’t quite what you want! You want <code>12</code> to say <code>"twelve"</code> <strong>not</strong> <code>"twelfth"</code>. I suggest using the <strong>english</strong> package to create numbered days and then use those in your <code>pmap_chr()</code>!</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>xmas <span class="ot">&lt;-</span> xmas <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">day.num =</span> ___, </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Full.Phrase =</span> <span class="fu">pmap_chr</span>(<span class="at">.l =</span> <span class="fu">list</span>(<span class="at">num_word =</span> day.num, </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">item =</span> Gift.Item, </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                                <span class="at">verb =</span> Verb, </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                                <span class="at">adjective =</span> Adjective, </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">location =</span> Location), </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>                           <span class="at">.f =</span> make_phrase)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="submission" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="submission"><span class="header-section-number">6</span> Submission</h2>
<p>Your <code>Full.Phrase</code> column is the answer to this week’s Practice Activity.</p>
<p><strong>Copy and paste your <code>Full.Phrase</code> column to show me the phrases you made!</strong></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>