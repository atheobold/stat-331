---
title: "The Next Step in Efficient Iteration"
author: Stat 331
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: ["xaringan-themer.css", "slide-style.css"]
    nature:
      highlightStyle: solarized-light
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
      slideNumberFormat: |
        <div class="progress-bar-container">
          <div class="progress-bar" style="width: calc(%current% / %total% * 100%);">
          </div>
        </div>
---


```{r, echo = FALSE, message = FALSE, warning = FALSE, fig.width = 8, fig.height = 6}
knitr::opts_chunk$set(message = FALSE, 
                      warning = FALSE, 
                      fig.align = "center")

options(htmltools.dir.version = FALSE)

library(xaringanthemer)
library(xaringan)
library(tidyverse)
library(flair)
library(glue)
library(palmerpenguins)

style_duo_accent(
  primary_color      = "#0F4C81", # pantone classic blue
  secondary_color    = "#B6CADA", # pantone baby blue
  header_font_google = google_font("Raleway"),
  text_font_google   = google_font("Raleway", "300", "300i"),
  code_font_google   = google_font("Source Code Pro"),
  text_font_size     = "30px"
)
```

.larger[A bit better: the `apply` family]

.pull-left[
- `apply()`

- `sapply()` 

]

.pull-right[
- `lapply()`

- `vapply()`
]

---

.larger[`apply()`]

.pull-left[
.bitlarger[Applies a function to a matrix] 

.large[**Returns a vector or a matrix**]
]

--

.pull-right[
```{r}
penguins_measurements <- penguins %>% 
  select(bill_length_mm:body_mass_g)

apply(penguins_measurements, MARGIN = 2, 
      mean, na.rm = TRUE)

```
]

---

.larger[`lapply()`]

.pull-left[
.bitlarger[Applies a function to a list] 

.large[**Always returns a list**]
]

.pull-right[
```{r}
lapply(penguins_measurements, 
       mean, na.rm = TRUE)

```
]

---

.larger[`sapply()`]

.pull-left[
.bitlarger[Wrapper around `lapply()`] 

.large[**Automatically simplifies the output**]
]

.pull-right[
```{r}
sapply(penguins_measurements, 
       mean, na.rm = TRUE)

```
]

---

.larger[`vapply()`]


.pull-left[
.bitlarger[Safer version of `sapply()`] 

.large[**Can specify what is returned**]
]

.pull-right[
```{r, error = TRUE}
vapply(penguins_measurements, mean, 
       FUN.VALUE = numeric(1), na.rm = TRUE)

vapply(penguins_measurements, mean, 
       FUN.VALUE = list(1), na.rm = TRUE)

```
]

---

<center>
.larger[The `apply` family]
</center>

.pull-left[
.bitlarger[**Pros**]

- More efficient code

- Functional programming

- Can output matrices

]

--

.pull-right[
.bitlarger[**Cons**]

- Uncertainty in output 

]
