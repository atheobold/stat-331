---
title: "Challenge 2: Spicing things up with ggplot2"
output: html_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE)

library(tidyverse)
library(here)

surveys <- read_csv(here("2_ggplot_import", "Lab", "surveys.csv"))

```

For this week's Challenge, you will have three different options to explore.
I've arranged these options in terms of their "spiciness," or the difficulty 
of completing the task. You are only required to complete one task, but if you 
are interested in exploring more than one (for bonus points!), feel free! 

</br>
</br>

# `r emo::ji("pepper")` Medium -- Ridge Plots

In question 8 you use side-by-side boxplots to visualize the distribution of 
weight within each genus. Boxplots have [substantial flaws](https://www.data-to-viz.com/caveat/boxplot.html), namely that they
disguise distributions with multiple modes. 

A "superior" alternative is the density plot. 
However, **ggplot2** does not allow for side-by-side density plots using 
`geom_density()`. Instead, we will need to make use of the **ggridges** 
package to create side-by-side density (ridge) plots. 

</br> 

> **For this challenge you are to change the plots you created in question 8 to 
> ridge plots. You will need to install the __ggridges__ package and explore the 
>`geom_density_ridges()` function.** 

</br>
</br>

# `r emo::ji("spicy")` Spicy -- Exploring Color Themes

The built in `ggplot()` color scheme may not be what you were looking for, but 
don't worry! There are many other color palettes available to use!  

You can change the colors used by `ggplot()` a few different ways.  

### Manual Specification 

Add the `scale_color_manual()` or `scale_fill_manual()` functions to your 
plot and directly specify the colors you want to use. You can either:  

- defining a vector of colors right there 
(e.g. `values = c("blue", "black", "red", "green")`)  

- creating a vector of colors using hex numbers and storing it in an object and
calling it (see below)
  * If you are interested in using specific hex colors, I like the [image color picker](https://imagecolorpicker.com/en) app to find the colors I want. 

```{r}
# A color deficient friendly palette with gray:
cdPalette_grey <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", 
                    "#0072B2", "#D55E00", "#CC79A7")
# A color deficient friendly palette with black:
cdPalette_blk <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", 
                   "#0072B2", "#D55E00", "#CC79A7")
surveys %>% 
  ggplot(aes(y = hindfoot_length, x = species_id, color = genus)) +
  geom_boxplot() +
  scale_color_manual(values = cdPalette_grey)
```

### Package Specification 

Install a package and use it's available color scales. Popular options 
include:  

- `RColorBrewer` -- change colors by using `scale_fill_brewer()` or `scale_colour_brewer()` 

- `viridis` -- change colors by using `scale_colour_viridis_d()` for discrete
data, `scale_colour_viridis_c()` for continuous data

- `ggsci` -- change colors by using `scale_color_<PALNAME>()` or
`scale_fill_<PALNAME>()`, where you specify the name of the palette you
wish to use (e.g. `scale_color_aaas()`)

</br>

> **In this challenge you are expected to use this information to modify the 
> plot you created in question 8.  
> First, you are to color the boxplots based on `species_id`.  
> Next, you are to change the colors used for `species_id` using either manual 
> color specification or any of the packages listed here (or others!).** 

</br>
</br>

# `r emo::ji("pepper")` Hot -- Exploring ggplot2 Annotation

<!-- Usually plots with white background look more readable when printed. Every -->
<!-- single component of a `ggplot()` graph can be customized using the generic  -->
<!-- `theme()` function, as we will see below. However, there are pre-loaded themes  -->
<!-- available that change the overall appearance of the graph without much effort.  -->

<!-- For example, we can change our previous graph to have a simpler white background  -->
<!-- using the `theme_bw()` function: -->

<!-- ```{r} -->
<!-- surveys %>%  -->
<!--   ggplot(aes(x = species_id, y = hindfoot_length, color = genus)) + -->
<!--   geom_boxplot() + -->
<!--   scale_color_manual(values = cdPalette_grey) + -->
<!--      theme_bw() -->
<!-- ``` -->

<!-- In addition to `theme_bw()`, which changes the plot background to white,  -->
<!-- **`ggplot2`**comes with several other themes which can be useful to quickly  -->
<!-- change the look of your visualization. The complete list of themes is available -->
<!-- at <https://ggplot2.tidyverse.org/reference/ggtheme.html>. The [ggthemes](https://jrnold.github.io/ggthemes/reference/index.html) package -->
<!-- provides a wide variety of options. -->

<!-- </br> -->

<!-- > **In this challenge you are expected to use this information to modify the  -->
<!-- > plot you created in question 8.  -->
<!-- > Explore the different themes available in ggplot2 and / or ggthemes. Pick a  -->
<!-- > background theme you prefer and add that background theme to the plot.  -->


We previously explored the idea of changing the location of the color 
legend. Some data scientists have advocated that we should try to eliminate
legends from our plots to make them more clear. Instead, we should use annotation. 

We can add an annotation to a `ggplot()` using the `annotate()` function like so:

```{r}
surveys %>%
  ggplot(aes(x = species_id, y = hindfoot_length, color = genus)) +
  geom_boxplot() +
  scale_color_manual(values = cdPalette_grey) +
  theme_bw() + 
  annotate("text", x = 1.7, y = 60, label = "Dipodomys")
```

Notice how I've labeled the "Dipodomys" genus, so the reader can tell that 
these three boxplots are associated with this genus. 

> **In this challenge you are expected to use this information to modify the 
> plot you created in question 8.  
> First, you are to color the boxplots based on `genus`.  
> Next, you are to add annotations for each genus, next to the boxplot(s) 
> associated with that genus.   
> Finally, you are expected to remove the color legend from the plot, since it 
> is no longer needed!**