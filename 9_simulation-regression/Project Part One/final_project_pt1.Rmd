---
title: "Final Project: Part One"
output: rmdformats::readthedown
---

```{r, include = FALSE}
library(tidyverse)
library(readxl)

knitr::opts_chunk$set(cache = TRUE)

schools <- read_xlsx(here::here("9_simulation-regression", 
                                "Project Part One", 
                                "US_schools_data.xlsx"))
```


In Part One of this project you will:

- Find two **quantitative** variables from Gapmider that you are interested in
exploring their relationship
- Download the data files for each variable
- Join two datasets into one larger dataset
- Visualize the relationship between these variables
- Use linear regression to model the relationship between these variables
- Describe the fit of the regression model


# The Data 

The data for this project were pulled from the 

<https://www.gapminder.org/data/>


# Data Cleaning 

It is often said that 80-90% of what a "data scientist" does is clean and 
organize data, in preparation for an analysis. I have certainly found this to 
be true.  

## Pivoting Longer

The grade (04, 08), race (AM, AS, BL, HI, HP, TR, WH), sex (A, F, M), and test
(READING, MATHEMATICS) are spread across the columns. We need to pivot these variables to be included in **one** column each (e.g., `grade`, `race`, `sex`, 
`test`).  

**Hint:** the `names_sep` argument in `pivot_longer()` is **very** helpful here!

```{r, include = FALSE}
schools_small <- schools_small %>% 
  pivot_longer(G04_A_A_READING:G08_TR_A_MATHEMATICS, 
           names_to = c("grade", "race", "sex", "test"), 
           names_sep = "_")
```

## Joining


## Regional Classification 

Similar to the midterm exam, create a regional grouping for these countries. 
As this will be presented in a written report, be mindful about how you
classify the regions. You will need to convince me why you believe these
different regions would have different relationships between the variables you 
are investigating. 


## Additional Cleaning

Feel free to clean up the values of these variables! Keep in mind that these 
are the values that will print to the visualizations you make! 

For example, 
maybe you would prefer for the `grade` variable to only have levels `"4"` and 
`"8"`, or maybe you'd prefer `test` to have levels `"Mathematics"` and 
`"Reading"`. I would highly recommend renaming the "A" level of `sex` to say 
`"all"`! 

You should also consider what variables you want to be factors, and if there 
are specific orderings that you would like for them to be displayed in for your 
visualizations! 


# Data Visualization

Create **at least three** different visualizations exploring the following:

- The relationship between instructional expenditures and testing scores, and
how this differs by regions

- The distribution of mathematics and reading test scores

- How school instructional expenditures and test scores have changed over time,
and how this differs by region 

Each of these visualizations should also investigate how these relationships 
differ based on student race and sex. 


# Linear Regression

Fit a simple linear regression model for the relationship between the variables
you selected. You will need to define which variable is the response ($y$) 
and which variable is the explanatory ($x$). 


## Model Fit

