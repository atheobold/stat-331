---
title: "A bit more about relational data"
author: "STAT 331"
format: 
  revealjs:
    logo: images/tidyr.png
    theme: night
    self-contained: true
editor: visual
execute: 
  warning: false
  message: false
  echo: false
---

```{r set-up}
#| include: false

library(tidyverse)
library(kableExtra)

surveys <- read_csv("data/surveys.csv")
plots <- read_csv("data/plots.csv")
species <- read_csv("data/species.csv")

```

##

::: {style="font-size: 3em;"}
Inner Join
:::

> Matches **all** pairs of observations when "keys" are equal

```{r, echo = FALSE, out.width = "100%"}
knitr::include_graphics("images/inner_join.png")
```

## 

::: {style="font-size: 2em"}
**Mean Weights**
:::

```{r}
#| eval: false
#| echo: true
surveys_weight <- surveys |>
  drop_na(weight) |> 
  group_by(species_id) |> 
  summarize(mean_weight = mean(weight))
```

```{r}
#| echo: false

surveys_weight <- surveys |> 
  filter(!is.na(weight)) |> 
  group_by(species_id) |> 
  summarize(mean_weight = mean(weight)) 

surveys_weight |> 
  head() |> 
  kable() |> 
  kable_styling()

```


##  {background-color="#D4D4D4"}

::: {style="font-size: 3em; color: #000000;"}
**Adding Information**
:::

```{r}
#| eval: false
#| echo: true
surveys_weight |> 
  inner_join(species, by = "species_id")
```

```{r}
#| echo: false
surveys_weight |> 
  inner_join(species, by = "species_id") |> 
  head(5) |> 
  kable() |> 
  kable_styling()
```


## 

::: {style="font-size: 3em; color: #873e23;"}
Mutating joins
:::

::: columns
::: {.column width="45%"}
-   Left Join: Everything is kept in the dataset **on the left**

-   Right Join: Everything is kept in the dataset **on the right**

-   Full Join: Everything is kept in **both** datasets
:::

::: {.column width="5%"}
:::

::: {.column width="45%"}
![](images/joins.JPG)
:::
:::

##  {background-color="#D4D4D4"}

::: {style="font-size: 3em; color: #000000;"}
Handy Helpers
:::

. . .

</br>

::: columns
::: {.column width="40%"}

::: {style="font-size: 1.5em;"}
`rename()` 
:::

:::

::: {.column width="5%"}
:::

::: {.column width="50%"}
Change names of columns
:::
:::

. . .

</br>

::: columns
::: {.column width="40%"}

::: {style="font-size: 1.5em"}
`separate()`
:::

:::

::: {.column width="5%"}
:::

::: {.column width="55%"}
Separate values of a variable
:::
:::

## 

::: {style="font-size: 3em;"}
Some words about resources
:::

. . .

<center>
![](images/stack_overflow.PNG)
</center>

::: columns
::: {.column width="45%"}

::: {style="font-size: 2em; color: #873e23;"}
**Using**
:::


:::

::: {.column width="5%"}
:::

::: {.column width="45%"}

::: {style="font-size: 2em; color: #873e23;"}
**Learning**
:::

:::
:::

## A vignette...

<center>
![](images/help.PNG)
</center>

## 

::: {style="font-size: 3em;"}
Some words about functions
:::

::: columns
::: {.column width="45%"}
![](images/depreciated.PNG)
:::

::: {.column width="5%"}
:::

::: {.column width="45%"}
Has a better alternative available and is scheduled for removal.
:::
:::

. . .

::: columns
::: {.column width="45%"}
![](images/superseded.png)
:::

::: {.column width="5%"}
:::

::: {.column width="45%"}
Has a known better alternative, but the function itself is not going away.
:::
:::

